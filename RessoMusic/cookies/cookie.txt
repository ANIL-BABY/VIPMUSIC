from selenium import webdriver
from selenium.webdriver.chrome.options import Options
import os
options = Options()
prefs = {'exit_type': 'Normal'}
options.add_experimental_option("prefs", {'profile': prefs})
options.add_argument(f"user-data-dir={os.getcwd()}/chrome")
options.add_argument("user-agent=Mozilla/5.0 (iPhone; CPU iPhone OS 10_3 like Mac OS X) AppleWebKit/602.1.50 (KHTML, like Gecko) CriOS/56.0.2924.75 Mobile/14E5239e Safari/602.1")
options.add_argument("no-sandbox")
options.add_argument('start-maximized')
options.add_argument('disable-infobars')
options.add_argument("--autoplay-policy=no-user-gesture-required")
options.add_experimental_option("excludeSwitches", ['enable-automation'])
driver = webdriver.Chrome(options=options)
def save_cookies_to_netscape_file(cookies, output_file):
    try:
        with open(output_file, 'w') as f:
            f.write("# Netscape HTTP Cookie File\n")
            f.write("# This is a generated file! Do not edit.\n\n")
            f.write("# domain\tinclude_subdomains\tpath\tsecure\texpiration_date\tname\tvalue\n")
            for cookie in cookies:
                domain = cookie.get('domain', '')
                path = cookie.get('path', '/')
                secure = "TRUE" if cookie.get('secure') else "FALSE"
                expiry = cookie.get('expiry') or cookie.get('expires') or 0
                name = cookie.get('name', '')
                value = cookie.get('value', '')
                f.write(f"{domain}\tTRUE\t{path}\t{secure}\t{int(expiry)}\t{name}\t{value}\n")
        return f"Cookies have been saved to {output_file}"
    except Exception as e:
        return f"An error occurred: {e}"
while True:
    user_input = input("Login to your YouTube account and play a video [Completed] (Y/N): ")
    if user_input.upper() == "Y":
        print('Hello, logged in to your account..!')
        break
while True:
    user_input = input("Enter a name for your cookies file: ")
    if user_input:
        output_file = f"{user_input}.txt"
        break
cookies = driver.get_cookies()
output_file = os.path.join(os.getcwd(), output_file)
print(save_cookies_to_netscape_file(cookies, output_file))
driver.quit()
